enum ApplicationType {
    cleaner
    company_admin
}

enum ApplicationStatus {
    pending
    approved
    rejected
}

input CompanyInfoInput {
    companyName: String!
    registrationNumber: String!
    taxId: String!
    companyStreet: String!
    companyCity: String!
    companyPostalCode: String!
    companyCounty: String
    companyCountry: String!
    businessType: String
}

input ApplicationDocumentsInput {
    identityDocument: Upload!
    businessRegistration: Upload
    insuranceCertificate: Upload
    additionalDocuments: [Upload!]
}

input SubmitApplicationInput {
    applicationType: ApplicationType!
    message: String
    companyInfo: CompanyInfoInput
    documents: ApplicationDocumentsInput
}

type CompanyInfo {
    companyName: String!
    registrationNumber: String!
    taxId: String!
    companyStreet: String!
    companyCity: String!
    companyPostalCode: String!
    companyCounty: String
    companyCountry: String!
    businessType: String
}

type ApplicationDocuments {
    identityDocumentUrl: String!
    businessRegistrationUrl: String
    insuranceCertificateUrl: String
    additionalDocuments: [String!]
}

type Application {
    id: ID!
    user: User! @goField(forceResolver: true)
    applicationType: ApplicationType!
    status: ApplicationStatus!
    message: String
    companyInfo: CompanyInfo
    documents: ApplicationDocuments
    rejectionReason: String
    reviewedBy: User @goField(forceResolver: true)
    reviewedAt: Time
    createdAt: Time!
    updatedAt: Time!
}

## QUERIES

extend type Query {
    application(id: ID!): Application @authRequired
    myApplications: [Application!]! @authRequired
    pendingApplications: [Application!]! @authRequired
    generateDocumentSignedUrl(documentUrl: String!): String! @authRequired
}

## MUTATIONS

extend type Mutation {
    submitApplication(input: SubmitApplicationInput!): Application! @authRequired
    approveApplication(applicationId: ID!): Application! @authRequired
    rejectApplication(applicationId: ID!, reason: String): Application! @authRequired
}
